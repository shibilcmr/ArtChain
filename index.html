<!DOCTYPE html>
<html>
<head>
    <title>Save JSON</title>
</head>
<body>
    <h2>Save JSON File on Server</h2>
    
    <div>
        <label>Orders:</label>
        <input type="text" id="orders" value="1">
    </div>
    
    <div>
        <label>Type:</label>
        <input type="text" id="type" value="buy">
    </div>
    
    <div>
        <label>TP:</label>
        <input type="text" id="tp" value="5454">
    </div>
    
    <div>
        <label>SL:</label>
        <input type="text" id="sl" value="73727">
    </div>
    
    <br>
    <button onclick="saveJSON()">Save JSON File</button>
    <p id="message"></p>

    <script>
        async function saveJSON() {
            const orders = document.getElementById('orders').value;
            const type = document.getElementById('type').value;
            const tp = document.getElementById('tp').value;
            const sl = document.getElementById('sl').value;

            const jsonData = {
                "orders": orders,
                "type": type,
                "tp": tp,
                "sl": sl
            };

            try {
                // Use FormData instead of JSON to avoid CORS issues
                const formData = new FormData();
                formData.append('data', JSON.stringify(jsonData));
                formData.append('filename', 'data.json');

                const response = await fetch('save.php', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.text();
                document.getElementById('message').textContent = result;
            } catch (error) {
                document.getElementById('message').textContent = 'Error: ' + error;
            }
        }
    </script>
</body>
</html>
