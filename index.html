<!DOCTYPE html>
<html>
<head>
    <title>Save JSON</title>
</head>
<body>
    <h2>Save JSON File on Server</h2>
    
    <div>
        <label>Orders:</label>
        <input type="text" id="orders" value="1">
    </div>
    
    <div>
        <label>Type:</label>
        <input type="text" id="type" value="buy">
    </div>
    
    <div>
        <label>TP:</label>
        <input type="text" id="tp" value="5454">
    </div>
    
    <div>
        <label>SL:</label>
        <input type="text" id="sl" value="73727">
    </div>
    
    <br>
    <button onclick="saveJSON()">Save JSON File</button>
    <p id="message"></p>

    <script>
        // Get URL parameters and fill the form
        function getUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if(urlParams.get('orders')) {
                document.getElementById('orders').value = urlParams.get('orders');
            }
            if(urlParams.get('type')) {
                document.getElementById('type').value = urlParams.get('type');
            }
            if(urlParams.get('tp')) {
                document.getElementById('tp').value = urlParams.get('tp');
            }
            if(urlParams.get('sl')) {
                document.getElementById('sl').value = urlParams.get('sl');
            }
            
            // Auto-save if URL has parameters
            if(urlParams.toString()) {
                setTimeout(saveJSON, 1000);
            }
        }

        async function saveJSON() {
            const orders = document.getElementById('orders').value;
            const type = document.getElementById('type').value;
            const tp = document.getElementById('tp').value;
            const sl = document.getElementById('sl').value;

            const jsonData = {
                "orders": orders,
                "type": type,
                "tp": tp,
                "sl": sl
            };

            try {
                const response = await fetch('save.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(jsonData)
                });

                const result = await response.text();
                document.getElementById('message').textContent = result;
            } catch (error) {
                document.getElementById('message').textContent = 'Error: ' + error;
            }
        }

        // Load URL parameters when page loads
        window.onload = getUrlParams;
    </script>
</body>
</html>
